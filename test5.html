<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>회원가입 폼</title>
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .signup-form {
        max-width: 400px;
        margin: 0 auto;
      }
      label {
        display: block;
        margin-bottom: 8px;
      }
      input[type="text"],
      input[type="email"],
      input[type="password"] {
        width: 100%;
        padding: 8px;
        margin-bottom: 4px;
        box-sizing: border-box;
      }
      .error-message {
        color: red;
        font-size: 0.875em;
        margin: 0;
      }
      .gender-group {
        display: flex;
        margin-bottom: 16px;
      }
      .gender-group label {
        display: flex;
        align-items: center;
        margin-right: 16px;
      }
      .gender-group input[type="radio"] {
        margin-right: 8px;
      }
      .terms-group {
        margin-bottom: 16px;
      }
      .terms-group label {
        display: flex;
        align-items: center;
      }
      .terms-group input[type="checkbox"] {
        margin-right: 8px;
      }
      button {
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      button:hover {
        background-color: #0056b3;
      }
    </style>
  </head>
  <body>
    <div class="signup-form">
      <h2>회원가입</h2>
      <form id="registerForm">
        <label for="name">사용자 이름</label>
        <input type="text" id="name" name="name" />
        <div class="error-message" id="nameError"></div>

        <label for="email">이메일</label>
        <input type="email" id="email" name="email" />
        <div class="error-message" id="emailError"></div>

        <label for="password">비밀번호</label>
        <input type="password" id="password" name="password" />
        <div class="error-message" id="passwordError"></div>

        <label for="confirmPassword">비밀번호 확인</label>
        <input type="password" id="confirmPassword" name="confirmPassword" />
        <div class="error-message" id="confirmPasswordError"></div>

        <div class="gender-group">
          <label>
            <input type="radio" name="gender" value="male" /> 남자
          </label>
          <label>
            <input type="radio" name="gender" value="female" /> 여자
          </label>
          <label>
            <input type="radio" name="gender" value="Genderless" /> 기타
          </label>
        </div>
        <div class="error-message" id="genderError"></div>

        <div class="terms-group">
          <label>
            <input type="checkbox" id="terms" name="terms" />
            약관에 동의합니다.
          </label>
          <div class="error-message" id="termsError"></div>
        </div>

        <button type="submit">회원가입</button>
      </form>
      <h3>회원가입 정보 확인</h3>
      <div id="info"></div>
    </div>

    <script>
      $(document).ready(function () {
        function validateFields() {
          let isValid = true;

          // 사용자 이름
          if ($("#name").val().trim() === "") {
            $("#nameError").text("사용자 이름을 입력해 주세요.");
            isValid = false;
          } else {
            $("#nameError").text("");
          }

          // 이메일
          if ($("#email").val().trim() === "") {
            $("#emailError").text("이메일을 입력해 주세요.");
            isValid = false;
          } else {
            $("#emailError").text("");
          }

          // 비밀번호
          if ($("#password").val().trim() === "") {
            $("#passwordError").text("비밀번호를 입력해 주세요.");
            isValid = false;
          } else {
            $("#passwordError").text("");
          }

          // 비밀번호 확인
          if ($("#confirmPassword").val().trim() === "") {
            $("#confirmPasswordError").text("비밀번호 확인을 입력해 주세요.");
            isValid = false;
          } else if ($("#confirmPassword").val() !== $("#password").val()) {
            $("#confirmPasswordError").text(
              "비밀번호와 비밀번호 확인이 일치하지 않습니다."
            );
            isValid = false;
          } else {
            $("#confirmPasswordError").text("");
          }

          // 성별
          if ($('input[name="gender"]:checked').length === 0) {
            $("#genderError").text("성별을 선택해 주세요.");
            isValid = false;
          } else {
            $("#genderError").text("");
          }

          // 약관 동의
          if (!$("#terms").is(":checked")) {
            $("#termsError").text("약관에 동의해야 회원가입이 가능합니다.");
            isValid = false;
          } else {
            $("#termsError").text("");
          }

          return isValid;
        }

        // 폼 제출 시 유효성 검사
        $("#registerForm").on("submit", function (e) {
          e.preventDefault();
          if (validateFields()) {
            // 입력이 유효한 경우, 회원가입 정보 확인 영역에 입력된 데이터 표시
            $("#info").html(`
                        <p><strong>사용자 이름:</strong> ${$("#name")
                          .val()
                          .trim()}</p>
                        <p><strong>이메일:</strong> ${$("#email")
                          .val()
                          .trim()}</p>
                        <p><strong>비밀번호:</strong> ${$(
                          "#password"
                        ).val()}</p>
                        <p><strong>성별:</strong> ${$(
                          'input[name="gender"]:checked'
                        ).val()}</p>
                    `);
          }
        });

        // 입력 필드의 실시간 유효성 검사
        $("#name, #email, #password, #confirmPassword").on(
          "input",
          function () {
            validateFields();
          }
        );

        $("#terms").on("change", function () {
          validateFields();
        });

        // 초기 로드 시 에러 메시지 처리
        validateFields();
      });
    </script>
  </body>
</html>
